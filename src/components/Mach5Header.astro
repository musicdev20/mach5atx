---
const navItems = [
    { label: 'Home', href: '/' },
    { label: 'Bio', href: '/bio' },
    { label: 'Shows', href: '/#upcoming-shows' },
    { label: 'The Songs', href: '/#live-energy' },
    { label: 'Press Kit', href: '/#press-kit' }
];

const currentPath = Astro.url.pathname.replace(/\/+$/, '') || '/';
const isActive = (href) => {
    const path = (href.split('#')[0] || '/').replace(/\/+$/, '') || '/';
    return currentPath === path;
};
---

<header class="m5-top-header">
    <div class="m5-checker" aria-hidden="true"></div>
    <div class="m5-shell">
        <nav class="m5-nav" aria-label="Main">
            <a class="m5-brand" href="/">
                <img class="m5-brand-logo" src="/images/logos/m5logo1.webp" alt="Mach 5" loading="eager" decoding="async" />
            </a>
            <ul class="m5-nav-links">
                {
                    navItems.map((item) => (
                        <li>
                            <a href={item.href} class={isActive(item.href) ? 'is-active' : undefined} aria-current={isActive(item.href) ? 'page' : undefined}>
                                {item.label}
                            </a>
                        </li>
                    ))
                }
            </ul>
        </nav>
    </div>
</header>

<style>
    .m5-top-header {
        position: relative;
        z-index: 4;
    }
    .m5-checker {
        height: 48px;
        background:
            linear-gradient(180deg, rgb(255 255 255 / 10%) 0%, rgb(255 255 255 / 0%) 35%),
            url('/images/checkerboard.svg') center / auto 100% repeat-x;
        border-bottom: 1px solid #343a4a;
        box-shadow: inset 0 -1px 0 rgb(255 255 255 / 20%), 0 8px 24px rgb(0 0 0 / 30%);
    }
    .m5-shell {
        width: min(1200px, 100% - 3.25rem);
        margin-inline: auto;
    }
    .m5-nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1.5rem;
        padding-top: 16px;
    }
    .m5-brand {
        margin: 0;
        display: inline-flex;
        align-items: center;
        flex: 0 0 auto;
        text-decoration: none;
        line-height: 0;
    }
    .m5-brand-logo {
        display: block;
        width: clamp(126px, 10vw, 162px);
        height: clamp(126px, 10vw, 162px);
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid rgb(245 247 252 / 72%);
        background: rgb(8 12 22 / 88%);
        padding: 0.35rem;
        filter: drop-shadow(0 4px 12px rgb(0 0 0 / 35%));
    }
    .m5-nav-links {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        list-style: none;
        margin: 0;
        padding: 0;
    }
    .m5-nav-links a {
        color: #f7f9ff;
        text-decoration: none;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        font-size: 1.55rem;
        font-weight: 750;
    }
    .m5-nav-links a:hover {
        color: #ff3f4b;
    }
    .m5-nav-links a.is-active {
        color: #ff3f4b;
        text-shadow: 0 0 10px rgb(255 63 75 / 28%);
    }
    @media (max-width: 980px) {
        .m5-nav-links {
            display: none;
        }
    }
    @media (max-width: 860px) {
        .m5-checker {
            height: 32px;
            background-size: auto 100%, auto 100%;
        }
        .m5-shell {
            width: min(1200px, 100% - 1.75rem);
        }
        .m5-nav {
            padding-top: 12px;
        }
        .m5-brand-logo {
            width: 124px;
            height: 124px;
        }
    }
</style>
